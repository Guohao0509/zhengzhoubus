app.controller("userListController",function($rootScope,$scope,$http,$state,$localStorage,$stateParams,$myHttpService,$tableListService,$modal){var selected=!1;$scope.selectAll=function(){selected=!selected,angular.forEach($scope.pageResponse.rows,function(item){item.selected=selected})};var options={searchFormId:"J_reg_form",listUrl:"api/user/queryUserListByKeword.htm"};$tableListService.init($scope,options),$tableListService.get(),$scope.useregtime={opened:!1,dateOptions:{datepickerMode:"day",showWeeks:!1,minMode:"day"},format:"yyyy-MM-dd",clear:function(){$scope.regDate=null},disabled:function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},toggleMin:function(){$scope.minDate=$scope.minDate?null:new Date},open:function($event){$event.preventDefault(),$event.stopPropagation(),$scope.useregtime.opened=!0}},$scope.restData=function(){$scope.userid="",$scope.regDate=""},$scope.openUserDetailModal=function(userid){$modal.open({templateUrl:"a-bugubus/user/user_detasils.html",controller:"UserDetailModalController",size:"md",resolve:{userid:function(){return userid}}})},$scope.refundOrder=function(userid,balance){layer.confirm("您确定要给用户退款吗？",{icon:3,title:"提示"},function(){console.log({userid:userid,refundfee:balance}),$myHttpService.post("api/user/addUserRefundOrder",{userid:userid,refundfee:balance},function(data){layer.msg(data.msg),$state.go("app.user.user_list",{},{reload:!0})})},function(index){layer.close(index)})}}),app.controller("UserDetailModalController",["$scope","$modalInstance","userid","$myHttpService",function($scope,$Usermodel,userid,$myHttpService){$myHttpService.post("api/user/queryUserInfoByUsrId",{userid:userid},function(data){$scope.data=data,console.log($scope.data)}),$scope.ok=function(){$Usermodel.close()}}]);