app.controller("StatisticController",function($rootScope,$scope,$http,$state,$localStorage,$stateParams,$filter,$tableListService,$myHttpService){function getDateByDays(days,date){void 0==days&&(days=0);var timestamp,newDate,date=date||new Date;return date instanceof Date||(date=new Date(date.replace(/-/g,"/"))),timestamp=date.getTime(),newDate=new Date(timestamp+24*days*3600*1e3)}$scope.d=[[1,6.5],[2,6.5],[3,7],[4,8],[5,7.5],[6,7],[7,6.8],[8,7],[9,7.2],[10,7],[11,6.8],[12,7]],$scope.startDate=$filter("date")(getDateByDays(-8),"yyyy-MM-dd"),$scope.endDate=$filter("date")(getDateByDays(-1),"yyyy-MM-dd"),$scope.startDateOption={opened:!1,dateOptions:{datepickerMode:"day",showWeeks:!1,minMode:"day"},format:"yyyy-MM-dd",disabled:function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},toggleMin:function(){$scope.minDate=$scope.minDate?null:new Date},open:function($event){$event.preventDefault(),$event.stopPropagation(),$scope.startDateOption.opened=!0}},$scope.endDateOption={opened:!1,dateOptions:{datepickerMode:"day",showWeeks:!1,minMode:"day"},format:"yyyy-MM-dd",disabled:function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},toggleMin:function(){$scope.minDate=$scope.minDate?null:new Date},open:function($event){$event.preventDefault(),$event.stopPropagation(),$scope.endDateOption.opened=!0}},$scope.statisticData={},$scope.lineChartXData=[],$scope.lineChartYData=[],$myHttpService.post("api/trade/getDayStatisticsCount",{},function(data){$scope.statisticData=data});var options={searchFormId:"J_search_form",listUrl:"api/trade/queryDayStatistics"};$scope.a="a",$scope.queryStatitstic=function(){$myHttpService.post("api/trade/getDayStatisticsDate",{startDate:$scope.startDate instanceof Date?$filter("date")($scope.startDate,"yyyy-MM-dd"):$scope.startDate,endDate:$scope.endDate instanceof Date?$filter("date")($scope.endDate,"yyyy-MM-dd"):$scope.endDate},function(data){for(var x=[],y=[],i=0;i<data.rows.length;i++)y.push([i,data.rows[i].totalMon]),x.push([i,$filter("date")(data.rows[i].date,"MM-dd")]);$scope.a="a"==$scope.a?"b":"a",$scope.lineChartXData=x,$scope.lineChartYData=y}),options.formData={startDate:$scope.startDate instanceof Date?$filter("date")($scope.startDate,"yyyy-MM-dd"):$scope.startDate,endDate:$scope.endDate instanceof Date?$filter("date")($scope.endDate,"yyyy-MM-dd"):$scope.endDate},$tableListService.init($scope,options),$scope.pageRequest.getResponse()},$scope.queryStatitstic()});