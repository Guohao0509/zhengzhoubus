app.controller("BusEditController",function($rootScope,$scope,$http,$state,$localStorage,$stateParams,$myHttpService){$scope.editMode=!!$stateParams.id,$scope.editMode?($scope.bus={carid:$stateParams.id},$myHttpService.post("api/car/queryCarinfo.htm",$scope.bus,function(data){$scope.bus=data.carinfo}),$scope.submit=function(){$myHttpService.post("api/car/updateCarinfo.htm",$scope.bus,function(){layer.msg("修改成功！",{offset:"100px"})})},$scope.delete=function(item){layer.confirm("您确定要删除吗？",{icon:3,title:"提示"},function(){$myHttpService.post("api/car/deleteCarinfo.htm",item,function(){layer.msg("删除成功！",{offset:"100px"}),window.setTimeout(function(){$state.go("app.bus.list",{},{reload:!0})},1e3)})},function(index){layer.close(index)})}):($scope.bus={cartype:0},$scope.submiting=!1,$scope.submit=function(){$scope.submiting=!0,$myHttpService.post("api/car/insertCarinfo.htm",$scope.bus,function(){$scope.submiting=!1,layer.msg("添加成功！",{offset:"100px"}),$state.go("app.bus.add",{},{reload:!0})},function(){$scope.submiting=!1})})}),app.controller("BusListController",function($rootScope,$scope,$http,$state,$localStorage,$stateParams,$filter,$tableListService,$myHttpService){var selected=!1;$scope.selectAll=function(){selected=!selected,angular.forEach($scope.content,function(item){item.selected=selected})};var options={searchFormId:"J_search_form",listUrl:"api/car/queryCarlistByKeyword.htm"};$scope.delete=function(item){layer.confirm("您确定要删除吗？",{icon:3,title:"提示"},function(){$myHttpService.post("api/car/deleteCarinfo.htm",item,function(){layer.msg("删除成功！",{offset:"100px"}),window.setTimeout(function(){$state.go("app.bus.list",{},{reload:!0})},1e3)})},function(index){layer.close(index)})},$tableListService.init($scope,options),$tableListService.get()});