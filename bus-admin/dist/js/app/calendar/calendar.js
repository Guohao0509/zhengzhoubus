app.controller("FullcalendarCtrl",["$scope",function($scope){var date=new Date,d=date.getDate(),m=date.getMonth(),y=date.getFullYear();$scope.eventSource={url:"http://www.google.com/calendar/feeds/usa__en%40holiday.calendar.google.com/public/basic",className:"gcal-event",currentTimezone:"America/Chicago"},$scope.events=[{title:"All Day Event",start:new Date(y,m,1),className:["b-l b-2x b-info"],location:"New York",info:"This a all day event that will start from 9:00 am to 9:00 pm, have fun!"},{title:"Dance class",start:new Date(y,m,3),end:new Date(y,m,4,9,30),allDay:!1,className:["b-l b-2x b-danger"],location:"London",info:"Two days dance training class."},{title:"Game racing",start:new Date(y,m,6,16,0),className:["b-l b-2x b-info"],location:"Hongkong",info:"The most big racing of this year."},{title:"Soccer",start:new Date(y,m,8,15,0),className:["b-l b-2x b-info"],location:"Rio",info:"Do not forget to watch."},{title:"Family",start:new Date(y,m,9,19,30),end:new Date(y,m,9,20,30),className:["b-l b-2x b-success"],info:"Family party"},{title:"Long Event",start:new Date(y,m,d-5),end:new Date(y,m,d-2),className:["bg-success bg"],location:"HD City",info:"It is a long long event"},{title:"Play game",start:new Date(y,m,d-1,16,0),className:["b-l b-2x b-info"],location:"Tokyo",info:"Tokyo Game Racing"},{title:"Birthday Party",start:new Date(y,m,d+1,19,0),end:new Date(y,m,d+1,22,30),allDay:!1,className:["b-l b-2x b-primary"],location:"New York",info:"Party all day"},{title:"Repeating Event",start:new Date(y,m,d+4,16,0),alDay:!1,className:["b-l b-2x b-warning"],location:"Home Town",info:"Repeat every day"},{title:"Click for Google",start:new Date(y,m,28),end:new Date(y,m,29),url:"http://google.com/",className:["b-l b-2x b-primary"]},{title:"Feed cat",start:new Date(y,m+1,6,18,0),className:["b-l b-2x b-info"]}],$scope.precision=400,$scope.lastClickTime=0,$scope.alertOnEventClick=function(date){var time=(new Date).getTime();time-$scope.lastClickTime<=$scope.precision&&$scope.events.push({title:"New Event",start:date,className:["b-l b-2x b-info"]}),$scope.lastClickTime=time},$scope.alertOnDrop=function(event,delta){$scope.alertMessage="Event Droped to make dayDelta "+delta},$scope.alertOnResize=function(event,delta){$scope.alertMessage="Event Resized to make dayDelta "+delta},$scope.overlay=$(".fc-overlay"),$scope.alertOnMouseOver=function(event,jsEvent){$scope.event=event,$scope.overlay.removeClass("left right").find(".arrow").removeClass("left right top pull-up");var wrap=$(jsEvent.target).closest(".fc-event"),cal=wrap.closest(".calendar"),left=wrap.offset().left-cal.offset().left,right=cal.width()-(wrap.offset().left-cal.offset().left+wrap.width());right>$scope.overlay.width()?$scope.overlay.addClass("left").find(".arrow").addClass("left pull-up"):left>$scope.overlay.width()?$scope.overlay.addClass("right").find(".arrow").addClass("right pull-up"):$scope.overlay.find(".arrow").addClass("top"),0==wrap.find(".fc-overlay").length&&wrap.append($scope.overlay)},$scope.uiConfig={calendar:{height:450,editable:!0,header:{left:"prev",center:"title",right:"next"},dayClick:$scope.alertOnEventClick,eventDrop:$scope.alertOnDrop,eventResize:$scope.alertOnResize,eventMouseover:$scope.alertOnMouseOver}},$scope.addEvent=function(){$scope.events.push({title:"New Event",start:new Date(y,m,d),className:["b-l b-2x b-info"]})},$scope.remove=function(index){$scope.events.splice(index,1)},$scope.changeView=function(view){$(".calendar").fullCalendar("changeView",view)},$scope.today=function(){$(".calendar").fullCalendar("today")},$scope.eventSources=[$scope.events]}]);