!function($){function invokePublicMethod(methodName,args){if(publicMethods[methodName]){var sliderObject=retrieveSliderObjectFromElement(this),result=publicMethods[methodName].apply(sliderObject,args);return"undefined"==typeof result?$(this):result}throw new Error("method '"+methodName+"()' does not exist for slider.")}function retrieveSliderObjectFromElement(element){var sliderObject=$(element).data("slider");if(sliderObject&&sliderObject instanceof Slider)return sliderObject;throw new Error(ErrorMsgs.callingContextNotSliderInstance)}function createNewSliderInstance(opts){var $this=$(this);return $this.each(function(){var $this=$(this),slider=$this.data("slider"),options="object"==typeof opts&&opts;slider&&!options&&(options={},slider.handle1.off(),slider.handle2.off(),slider.picker.off(),$.each($.fn.slider.defaults,function(key){options[key]=slider[key]})),$this.data("slider",new Slider(this,$.extend({},$.fn.slider.defaults,options)))}),$this}var ErrorMsgs={formatInvalidInputErrorMsg:function(input){return"Invalid input value '"+input+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},Slider=function(element,options){var el=this.element=$(element).hide(),origWidth=$(element)[0].style.width,updateSlider=!1,parent=this.element.parent();parent.hasClass("slider")===!0?(updateSlider=!0,this.picker=parent):this.picker=$('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle min-slider-handle"></div><div class="slider-handle max-slider-handle"></div></div><div id="tooltip" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div><div id="tooltip_min" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div><div id="tooltip_max" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element),this.id=this.element.data("slider-id")||options.id,this.id&&(this.picker[0].id=this.id),("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&(this.touchCapable=!0);var tooltip=this.element.data("slider-tooltip")||options.tooltip;switch(this.tooltip=this.picker.find("#tooltip"),this.tooltipInner=this.tooltip.find("div.tooltip-inner"),this.tooltip_min=this.picker.find("#tooltip_min"),this.tooltipInner_min=this.tooltip_min.find("div.tooltip-inner"),this.tooltip_max=this.picker.find("#tooltip_max"),this.tooltipInner_max=this.tooltip_max.find("div.tooltip-inner"),updateSlider===!0&&(this.picker.removeClass("slider-horizontal"),this.picker.removeClass("slider-vertical"),this.tooltip.removeClass("hide"),this.tooltip_min.removeClass("hide"),this.tooltip_max.removeClass("hide")),this.orientation=this.element.data("slider-orientation")||options.orientation,this.orientation){case"vertical":this.picker.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this.tooltip.addClass("right")[0].style.left="100%",this.tooltip_min.addClass("right")[0].style.left="100%",this.tooltip_max.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",origWidth),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px",this.tooltip_min.addClass("top")[0].style.top=-this.tooltip_min.outerHeight()-14+"px",this.tooltip_max.addClass("top")[0].style.top=-this.tooltip_max.outerHeight()-14+"px"}var self=this;$.each(["min","max","step","precision","value","reversed","handle"],function(i,attr){self[attr]="undefined"!=typeof el.data("slider-"+attr)?el.data("slider-"+attr):"undefined"!=typeof options[attr]?options[attr]:"undefined"!=typeof el.prop(attr)?el.prop(attr):0}),this.value instanceof Array?updateSlider&&!this.range?this.value=this.value[0]:this.range=!0:this.range&&(this.value=[this.value,this.max]),this.selection=this.element.data("slider-selection")||options.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,updateSlider===!0&&(this.handle1.removeClass("round triangle"),this.handle2.removeClass("round triangle hide"));var availableHandleModifiers=["round","triangle","custom"];-1!==availableHandleModifiers.indexOf(this.handle)&&(this.handle1.addClass(this.handle),this.handle2.addClass(this.handle)),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=options.formater,this.tooltip_separator=options.tooltip_separator,this.tooltip_split=options.tooltip_split,this.setValue(this.value),this.handle1.on({keydown:$.proxy(this.keydown,this,0)}),this.handle2.on({keydown:$.proxy(this.keydown,this,1)}),this.touchCapable&&this.picker.on({touchstart:$.proxy(this.mousedown,this)}),this.picker.on({mousedown:$.proxy(this.mousedown,this)}),"hide"===tooltip?(this.tooltip.addClass("hide"),this.tooltip_min.addClass("hide"),this.tooltip_max.addClass("hide")):"always"===tooltip?(this.showTooltip(),this.alwaysShowTooltip=!0):(this.picker.on({mouseenter:$.proxy(this.showTooltip,this),mouseleave:$.proxy(this.hideTooltip,this)}),this.handle1.on({focus:$.proxy(this.showTooltip,this),blur:$.proxy(this.hideTooltip,this)}),this.handle2.on({focus:$.proxy(this.showTooltip,this),blur:$.proxy(this.hideTooltip,this)})),this.enabled=options.enabled&&(void 0===this.element.data("slider-enabled")||this.element.data("slider-enabled")===!0),this.enabled?this.enable():this.disable(),this.natural_arrow_keys=this.element.data("slider-natural_arrow_keys")||options.natural_arrow_keys};Slider.prototype={constructor:Slider,over:!1,inDrag:!1,showTooltip:function(){this.tooltip_split===!1?this.tooltip.addClass("in"):(this.tooltip_min.addClass("in"),this.tooltip_max.addClass("in")),this.over=!0},hideTooltip:function(){this.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this.tooltip.removeClass("in"),this.tooltip_min.removeClass("in"),this.tooltip_max.removeClass("in")),this.over=!1},layout:function(){var positionPercentages;if(positionPercentages=this.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1Stype[this.stylePos]=positionPercentages[0]+"%",this.handle2Stype[this.stylePos]=positionPercentages[1]+"%","vertical"===this.orientation)this.selectionElStyle.top=Math.min(positionPercentages[0],positionPercentages[1])+"%",this.selectionElStyle.height=Math.abs(positionPercentages[0]-positionPercentages[1])+"%";else{this.selectionElStyle.left=Math.min(positionPercentages[0],positionPercentages[1])+"%",this.selectionElStyle.width=Math.abs(positionPercentages[0]-positionPercentages[1])+"%";var offset_min=this.tooltip_min[0].getBoundingClientRect(),offset_max=this.tooltip_max[0].getBoundingClientRect();offset_min.right>offset_max.left?(this.tooltip_max.removeClass("top"),this.tooltip_max.addClass("bottom")[0].style.top="18px"):(this.tooltip_max.removeClass("bottom"),this.tooltip_max.addClass("top")[0].style.top="-30px")}this.range?(this.tooltipInner.text(this.formater(this.value[0])+this.tooltip_separator+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=(positionPercentages[1]+positionPercentages[0])/2+"%","vertical"===this.orientation?this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px"):this.tooltip.css("margin-left",-this.tooltip.outerWidth()/2+"px"),"vertical"===this.orientation?this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px"):this.tooltip.css("margin-left",-this.tooltip.outerWidth()/2+"px"),this.tooltipInner_min.text(this.formater(this.value[0])),this.tooltipInner_max.text(this.formater(this.value[1])),this.tooltip_min[0].style[this.stylePos]=positionPercentages[0]+"%","vertical"===this.orientation?this.tooltip_min.css("margin-top",-this.tooltip_min.outerHeight()/2+"px"):this.tooltip_min.css("margin-left",-this.tooltip_min.outerWidth()/2+"px"),this.tooltip_max[0].style[this.stylePos]=positionPercentages[1]+"%","vertical"===this.orientation?this.tooltip_max.css("margin-top",-this.tooltip_max.outerHeight()/2+"px"):this.tooltip_max.css("margin-left",-this.tooltip_max.outerWidth()/2+"px")):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=positionPercentages[0]+"%","vertical"===this.orientation?this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px"):this.tooltip.css("margin-left",-this.tooltip.outerWidth()/2+"px"))},mousedown:function(ev){if(!this.isEnabled())return!1;this.touchCapable&&"touchstart"===ev.type&&(ev=ev.originalEvent),this.triggerFocusOnHandle(),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var percentage=this.getPercentage(ev);if(this.range){var diff1=Math.abs(this.percentage[0]-percentage),diff2=Math.abs(this.percentage[1]-percentage);this.dragged=diff2>diff1?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?100-percentage:percentage,this.layout(),this.touchCapable&&$(document).on({touchmove:$.proxy(this.mousemove,this),touchend:$.proxy(this.mouseup,this)}),$(document).on({mousemove:$.proxy(this.mousemove,this),mouseup:$.proxy(this.mouseup,this)}),this.inDrag=!0;var val=this.calculateValue();return this.element.trigger({type:"slideStart",value:val}).data("value",val).prop("value",val),this.setValue(val),!0},triggerFocusOnHandle:function(handleIdx){0===handleIdx&&this.handle1.focus(),1===handleIdx&&this.handle2.focus()},keydown:function(handleIdx,ev){if(!this.isEnabled())return!1;var dir;switch(ev.which){case 37:case 40:dir=-1;break;case 39:case 38:dir=1}if(dir){this.natural_arrow_keys&&("vertical"===this.orientation&&!this.reversed||"horizontal"===this.orientation&&this.reversed)&&(dir=-1*dir);var oneStepValuePercentageChange=dir*this.percentage[2],percentage=this.percentage[handleIdx]+oneStepValuePercentageChange;percentage>100?percentage=100:0>percentage&&(percentage=0),this.dragged=handleIdx,this.adjustPercentageForRangeSliders(percentage),this.percentage[this.dragged]=percentage,this.layout();var val=this.calculateValue();return this.element.trigger({type:"slideStart",value:val}).data("value",val).prop("value",val),this.setValue(val,!0),this.element.trigger({type:"slideStop",value:val}).data("value",val).prop("value",val),!1}},mousemove:function(ev){if(!this.isEnabled())return!1;this.touchCapable&&"touchmove"===ev.type&&(ev=ev.originalEvent);var percentage=this.getPercentage(ev);this.adjustPercentageForRangeSliders(percentage),this.percentage[this.dragged]=this.reversed?100-percentage:percentage,this.layout();var val=this.calculateValue();return this.setValue(val,!0),!1},adjustPercentageForRangeSliders:function(percentage){this.range&&(0===this.dragged&&this.percentage[1]<percentage?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>percentage&&(this.percentage[1]=this.percentage[0],this.dragged=0))},mouseup:function(){if(!this.isEnabled())return!1;this.touchCapable&&$(document).off({touchmove:this.mousemove,touchend:this.mouseup}),$(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1,this.over===!1&&this.hideTooltip();var val=this.calculateValue();return this.layout(),this.element.data("value",val).prop("value",val).trigger({type:"slideStop",value:val}),!1},calculateValue:function(){var val;return this.range?(val=[this.min,this.max],0!==this.percentage[0]&&(val[0]=Math.max(this.min,this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step),val[0]=this.applyPrecision(val[0])),100!==this.percentage[1]&&(val[1]=Math.min(this.max,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step),val[1]=this.applyPrecision(val[1])),this.value=val):(val=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,val<this.min?val=this.min:val>this.max&&(val=this.max),val=parseFloat(val),val=this.applyPrecision(val),this.value=[val,this.value[1]]),val},applyPrecision:function(val){var precision=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);return this.applyToFixedAndParseFloat(val,precision)},getNumDigitsAfterDecimalPlace:function(num){var match=(""+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return match?Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0)):0},applyToFixedAndParseFloat:function(num,toFixedInput){var truncatedNum=num.toFixed(toFixedInput);return parseFloat(truncatedNum)},getPercentage:function(ev){!this.touchCapable||"touchstart"!==ev.type&&"touchmove"!==ev.type||(ev=ev.touches[0]);var percentage=100*(ev[this.mousePos]-this.offset[this.stylePos])/this.size;return percentage=Math.round(percentage/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,percentage))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(val,triggerSlideEvent){if(val||(val=0),this.value=this.validateInputValue(val),this.range?(this.value[0]=this.applyPrecision(this.value[0]),this.value[1]=this.applyPrecision(this.value[1]),this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=this.applyPrecision(this.value),this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),this.value[1]="after"===this.selection?this.max:this.min),this.diff=this.max-this.min,this.percentage=this.diff>0?[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff]:[0,0,100],this.layout(),triggerSlideEvent===!0){var slideEventValue=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:slideEventValue}).data("value",slideEventValue).prop("value",slideEventValue)}},validateInputValue:function(val){if("number"==typeof val)return val;if(val instanceof Array)return $.each(val,function(i,input){if("number"!=typeof input)throw new Error(ErrorMsgs.formatInvalidInputErrorMsg(input))}),val;throw new Error(ErrorMsgs.formatInvalidInputErrorMsg(val))},destroy:function(){this.handle1.off(),this.handle2.off(),this.element.off().show().insertBefore(this.picker),this.picker.off().remove(),$(this.element).removeData("slider")},disable:function(){this.enabled=!1,this.handle1.removeAttr("tabindex"),this.handle2.removeAttr("tabindex"),this.picker.addClass("slider-disabled"),this.element.trigger("slideDisabled")},enable:function(){this.enabled=!0,this.handle1.attr("tabindex",0),this.handle2.attr("tabindex",0),this.picker.removeClass("slider-disabled"),this.element.trigger("slideEnabled")},toggle:function(){this.enabled?this.disable():this.enable()},isEnabled:function(){return this.enabled},setAttribute:function(attribute,value){this[attribute]=value},getAttribute:function(attribute){return this[attribute]}};var publicMethods={getValue:Slider.prototype.getValue,setValue:Slider.prototype.setValue,setAttribute:Slider.prototype.setAttribute,getAttribute:Slider.prototype.getAttribute,destroy:Slider.prototype.destroy,disable:Slider.prototype.disable,enable:Slider.prototype.enable,toggle:Slider.prototype.toggle,isEnabled:Slider.prototype.isEnabled};$.fn.slider=function(option){if("string"==typeof option&&"refresh"!==option){var args=Array.prototype.slice.call(arguments,1);return invokePublicMethod.call(this,option,args)}return createNewSliderInstance.call(this,option)},$.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_separator:":",tooltip_split:!1,natural_arrow_keys:!1,handle:"round",reversed:!1,enabled:!0,formater:function(value){return value}},$.fn.slider.Constructor=Slider}(window.jQuery);