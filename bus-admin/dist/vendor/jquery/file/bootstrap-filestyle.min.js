!function(c){var b=function(d,e){this.options=e,this.$elementFilestyle=[],this.$element=c(d)};b.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val("")},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},disabled:function(d){if(d===!0)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(d!==!1)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(d){if(d===!0)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(d!==!1)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(d){if(d===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(d!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".glyphicon").remove())}},input:function(d){if(d===!0){if(!this.options.input){this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove();var e="",g=[];void 0===this.$element[0].files?g[0]={name:this.$element[0].value}:g=this.$element[0].files;for(var f=0;f<g.length;f++)e+=g[f].name.split("\\").pop()+", ";""!==e&&this.$elementFilestyle.find(":text").val(e.replace(/\, $/g,"")),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn")}}else{if(d!==!1)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var g=[];void 0===this.$element[0].files?g[0]={name:this.$element[0].value}:g=this.$element[0].files,g.length>0&&this.$elementFilestyle.find("label").append(' <span class="badge">'+g.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(d){if(void 0===d)return this.options.size;var f=this.$elementFilestyle.find("label"),e=this.$elementFilestyle.find("input");f.removeClass("btn-lg btn-sm"),e.removeClass("input-lg input-sm"),"nr"!=d&&(f.addClass("btn-"+d),e.addClass("input-"+d))},buttonText:function(d){return void 0===d?this.options.buttonText:(this.options.buttonText=d,void this.$elementFilestyle.find("label span").html(this.options.buttonText))},buttonName:function(d){return void 0===d?this.options.buttonName:(this.options.buttonName=d,void this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName}))},iconName:function(d){return void 0===d?this.options.iconName:void this.$elementFilestyle.find(".glyphicon").attr({"class":".glyphicon "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span class="glyphicon '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" disabled> ':""},pushNameFiles:function(){var d="",f=[];void 0===this.$element[0].files?f[0]={name:this.$element.value}:f=this.$element[0].files;for(var e=0;e<f.length;e++)d+=f[e].name.split("\\").pop()+", ";this.$elementFilestyle.find(":text").val(""!==d?d.replace(/\, $/g,""):"")},constructor:function(){var f,e,i=this,g="",h=this.$element.attr("id"),d=[],j="";""!==h&&h||(h="filestyle-"+c(".bootstrap-filestyle").length,this.$element.attr({id:h})),j='<span class="group-span-filestyle '+(this.options.input?"input-group-btn":"")+'"><label for="'+h+'" class="btn '+this.options.buttonName+" "+("nr"==this.options.size?"":"btn-"+this.options.size)+'" '+(this.options.disabled?'disabled="true"':"")+">"+this.htmlIcon()+this.options.buttonText+"</label></span>",g=this.options.buttonBefore?j+this.htmlInput():this.htmlInput()+j,this.$elementFilestyle=c('<div class="bootstrap-filestyle input-group">'+g+"</div>"),f=this.$elementFilestyle.find("label"),e=f.parent(),e.attr("tabindex","0").keypress(function(k){(13===k.keyCode||32===k.charCode)&&f.click()}),this.$element.css({position:"absolute",clip:"rect(0,0,0,0)"}).attr("tabindex","-1").after(this.$elementFilestyle),this.options.disabled&&this.$element.attr("disabled","true"),this.$element.change(function(){var k="";void 0===this.files?d[0]={name:this.value}:d=this.files;for(var l=0;l<d.length;l++)k+=d[l].name.split("\\").pop()+", ";i.$elementFilestyle.find(":text").val(""!==k?k.replace(/\, $/g,""):""),0==i.options.input?0==i.$elementFilestyle.find(".badge").length?i.$elementFilestyle.find("label").append(' <span class="badge">'+d.length+"</span>"):0==d.length?i.$elementFilestyle.find(".badge").remove():i.$elementFilestyle.find(".badge").html(d.length):i.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&this.$elementFilestyle.find("label").click(function(){return i.$element.click(),!1})}};var a=c.fn.filestyle;c.fn.filestyle=function(e,d){var f="",g=this.each(function(){if("file"===c(this).attr("type")){var j=c(this),h=j.data("filestyle"),i=c.extend({},c.fn.filestyle.defaults,e,"object"==typeof e&&e);h||(j.data("filestyle",h=new b(this,i)),h.constructor()),"string"==typeof e&&(f=h[e](d))}});return void 0!==typeof f?f:g},c.fn.filestyle.defaults={buttonText:" 选择文件",iconName:"glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,icon:!0,buttonBefore:!1,disabled:!1},c.fn.filestyle.noConflict=function(){return c.fn.filestyle=a,this},c(function(){c(".filestyle").each(function(){var e=c(this),d={input:"false"===e.attr("data-input")?!1:!0,icon:"false"===e.attr("data-icon")?!1:!0,buttonBefore:"true"===e.attr("data-buttonBefore")?!0:!1,disabled:"true"===e.attr("data-disabled")?!0:!1,size:e.attr("data-size"),buttonText:e.attr("data-buttonText"),buttonName:e.attr("data-buttonName"),iconName:e.attr("data-iconName")};e.filestyle(d)})})}(window.jQuery);